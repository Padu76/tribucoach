<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settimana 7 - Consolidamento e Futuro | Andrea Padoan Coach</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #fff7ed 50%, #f0fdf4 100%);
            min-height: 100vh;
            color: #1e293b;
        }

        /* AI Badge */
        .ai-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #1e293b 0%, #ea580c 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .personalization-banner {
            background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .personalization-banner.active {
            display: block;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1e293b 0%, #ea580c 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .session-info {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .timer-display {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            width: 200px;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            background: #22c55e;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .back-button {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Phase Indicator */
        .phase-indicator {
            background: white;
            border-radius: 12px;
            padding: 1rem 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .phase-step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            min-width: 250px;
        }

        .phase-step.active {
            background: linear-gradient(135deg, #ea580c 0%, #fb923c 100%);
            color: white;
        }

        .phase-step.completed {
            background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            color: white;
        }

        .phase-step.inactive {
            background: #f1f5f9;
            color: #94a3b8;
        }

        .phase-arrow {
            font-size: 1.5rem;
            color: #64748b;
        }

        /* Welcome Section */
        .welcome-section {
            background: white;
            border-radius: 16px;
            padding: 3rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            text-align: center;
        }

        .welcome-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 1rem;
        }

        .welcome-subtitle {
            font-size: 1.3rem;
            color: #ea580c;
            margin-bottom: 2rem;
        }

        .journey-recap {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: left;
        }

        .recap-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #16a34a;
            margin-bottom: 1rem;
            text-align: center;
        }

        .weeks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .week-card {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #16a34a;
            transition: transform 0.2s ease;
        }

        .week-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .week-number {
            font-size: 1.1rem;
            font-weight: bold;
            color: #16a34a;
            margin-bottom: 0.5rem;
        }

        .week-title {
            font-size: 0.9rem;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .week-insight {
            font-size: 0.8rem;
            color: #64748b;
            font-style: italic;
        }

        .process-explanation {
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: left;
        }

        .process-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 1rem;
            text-align: center;
        }

        .process-steps {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .process-step {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #ea580c;
        }

        .step-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 0.5rem;
        }

        .step-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .step-description {
            font-size: 0.9rem;
            color: #64748b;
            line-height: 1.5;
        }

        .step-duration {
            font-size: 0.8rem;
            color: #ea580c;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        /* Phase 1 - Assessment & Review */
        .phase1-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            display: none;
        }

        .phase1-section.active {
            display: block;
        }

        .phase-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f1f5f9;
        }

        .phase-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1e293b 0%, #ea580c 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .phase-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .phase-subtitle {
            font-size: 1rem;
            color: #64748b;
        }

        .assessment-progress {
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .assessment-progress-text {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 0.5rem;
        }

        .assessment-progress-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .assessment-progress-fill {
            background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            height: 100%;
            transition: width 0.3s ease;
        }

        .assessment-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid #ea580c;
        }

        .assessment-section h3 {
            color: #1e293b;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .assessment-intro {
            background: #fff7ed;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-style: italic;
            color: #ea580c;
        }

        .question-group {
            margin-bottom: 2rem;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 1rem;
            color: #1e293b;
            font-size: 1.1rem;
        }

        .likert-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }

        .likert-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
        }

        .likert-option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .likert-label {
            font-size: 0.8rem;
            text-align: center;
            color: #64748b;
            line-height: 1.2;
        }

        .transformation-tracker {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .tracker-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #16a34a;
            margin-bottom: 1rem;
            text-align: center;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .before-after {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #16a34a;
        }

        .ba-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 1rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #374151;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ea580c;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Phase 2 - Future Coaching */
        .phase2-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            display: none;
        }

        .phase2-section.active {
            display: block;
        }

        .coaching-context {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .coaching-context h3 {
            color: #16a34a;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .coaching-context p {
            color: #15803d;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .results-summary {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #16a34a;
        }

        .results-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .results-list {
            list-style: none;
            padding: 0;
        }

        .results-list li {
            padding: 0.25rem 0;
            color: #64748b;
            font-size: 0.9rem;
        }

        .chat-container {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            min-height: 400px;
            max-height: 500px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 12px;
            max-width: 85%;
            animation: messageSlide 0.3s ease-out;
        }

        .message.coach {
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
            margin-right: auto;
        }

        .message.user {
            background: linear-gradient(135deg, #e0f2fe 0%, #b3e5fc 100%);
            margin-left: auto;
            text-align: right;
        }

        .message-content {
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        .message-time {
            font-size: 0.8rem;
            color: #64748b;
        }

        .chat-input {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .chat-input input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .chat-input input:focus {
            outline: none;
            border-color: #ea580c;
        }

        .chat-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #16a34a;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        /* Completion Section */
        .completion-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-top: 2rem;
            display: none;
        }

        .completion-section.active {
            display: block;
        }

        .completion-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 1rem;
            text-align: center;
        }

        .completion-message {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #475569;
            margin-bottom: 2rem;
            text-align: center;
        }

        .celebration-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .celebration-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 1rem;
        }

        .celebration-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #64748b;
        }

        .transformation-results {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .transformation-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #16a34a;
            margin-bottom: 1rem;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .result-item {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #16a34a;
        }

        .result-score {
            font-size: 1.5rem;
            font-weight: bold;
            color: #16a34a;
            margin-bottom: 0.5rem;
        }

        .result-label {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 0.5rem;
        }

        .result-feedback {
            font-size: 0.8rem;
            color: #15803d;
            font-style: italic;
        }

        .maintenance-plan {
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .maintenance-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ea580c;
            margin-bottom: 1rem;
        }

        .plan-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .plan-section {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #ea580c;
        }

        .plan-section-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .plan-list {
            list-style: none;
            padding: 0;
        }

        .plan-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(234, 88, 12, 0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .plan-list li:last-child {
            border-bottom: none;
        }

        .completion-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1e293b 0%, #ea580c 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }

        .btn-secondary {
            background: white;
            color: #1e293b;
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover {
            border-color: #ea580c;
            color: #ea580c;
        }

        .btn-success {
            background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
        }

        .btn-disabled {
            background: #94a3b8;
            color: white;
            cursor: not-allowed;
        }

        .btn-celebration {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            font-size: 1.2rem;
            padding: 1rem 2rem;
        }

        .btn-celebration:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(251, 191, 36, 0.4);
        }

        /* Navigation Buttons */
        .form-navigation {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
        }

        /* Time Warning */
        .time-warning {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
            display: none;
        }

        .time-warning.active {
            display: block;
        }

        /* Animations */
        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        .celebrate {
            animation: celebrate 0.6s ease-in-out;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }
            
            .process-steps {
                grid-template-columns: 1fr;
            }
            
            .phase-indicator {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .phase-step {
                min-width: auto;
                width: 100%;
                justify-content: center;
            }
            
            .phase-arrow {
                transform: rotate(90deg);
            }
            
            .likert-scale {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .comparison-grid,
            .plan-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- AI Badge -->
    <div class="ai-badge">ü§ñ AI v2.0 Personalizzato</div>
    
    <!-- Personalization Banner -->
    <div class="personalization-banner" id="personalizationBanner">
        <span id="personalizationText">üéØ Coaching personalizzato attivo per il tuo profilo</span>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">üèÜ Settimana 7 - Consolidamento e Futuro</div>
            <div class="session-info">
                <div class="timer-display">
                    ‚è±Ô∏è <span id="sessionTimer">50:00</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="sessionProgress"></div>
                </div>
                <a href="module-hub.html" class="back-button">‚Üê Torna ai Moduli</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Phase Indicator -->
        <div class="phase-indicator">
            <div class="phase-step active" id="phaseStep1">
                <span>üìä</span>
                <span>Fase 1: Assessment & Review Percorso</span>
            </div>
            <div class="phase-arrow">‚Üí</div>
            <div class="phase-step inactive" id="phaseStep2">
                <span>üöÄ</span>
                <span>Fase 2: Coaching Futuro & Consolidamento</span>
            </div>
        </div>

        <!-- Welcome Section -->
        <section class="welcome-section fade-in" id="welcomeSection">
            <h1 class="welcome-title" id="welcomeTitle">Benvenuto nella Settimana Finale! üéâ</h1>
            <p class="welcome-subtitle" id="welcomeSubtitle">Consolidamento e Futuro - Il Culmine del Tuo Viaggio di Trasformazione</p>
            
            <div class="journey-recap">
                <h3 class="recap-title">üåü Il Tuo Straordinario Viaggio di 7 Settimane</h3>
                <div class="weeks-grid" id="weeksGrid">
                    <div class="week-card">
                        <div class="week-number">Settimana 1</div>
                        <div class="week-title">Incontro Conoscitivo</div>
                        <div class="week-insight">Hai scoperto i tuoi obiettivi autentici</div>
                    </div>
                    <div class="week-card">
                        <div class="week-number">Settimana 2</div>
                        <div class="week-title">Consapevolezza di S√©</div>
                        <div class="week-insight">Hai esplorato la tua identit√† profonda</div>
                    </div>
                    <div class="week-card">
                        <div class="week-number">Settimana 3</div>
                        <div class="week-title">Obiettivi SMART</div>
                        <div class="week-insight">Hai creato obiettivi concreti e misurabili</div>
                    </div>
                    <div class="week-card">
                        <div class="week-number">Settimana 4</div>
                        <div class="week-title">Piano di Azione</div>
                        <div class="week-insight">Hai costruito la roadmap del successo</div>
                    </div>
                    <div class="week-card">
                        <div class="week-number">Settimana 5</div>
                        <div class="week-title">Trasformazione Abitudini</div>
                        <div class="week-insight">Hai implementato abitudini vincenti</div>
                    </div>
                    <div class="week-card">
                        <div class="week-number">Settimana 6</div>
                        <div class="week-title">Scopri le Potenzialit√†</div>
                        <div class="week-insight">Hai identificato i tuoi super-poteri</div>
                    </div>
                </div>
            </div>
            
            <div class="process-explanation">
                <h3 class="process-title">üéØ La Tua Sessione Finale di Trasformazione</h3>
                <div class="process-steps">
                    <div class="process-step">
                        <div class="step-number">1</div>
                        <div class="step-title">Assessment Completo del Percorso</div>
                        <div class="step-description">
                            Valutiamo i risultati ottenuti, le trasformazioni avvenute e 
                            la crescita personale attraverso test comparativi e domande di riflessione.
                        </div>
                        <div class="step-duration">‚è±Ô∏è 20 minuti</div>
                    </div>
                    <div class="process-step">
                        <div class="step-number">2</div>
                        <div class="step-title">Coaching Futuro & Piano Mantenimento</div>
                        <div class="step-description">
                            Creiamo la visione del tuo futuro, il piano di mantenimento a lungo termine 
                            e gli obiettivi next-level per continuare la crescita.
                        </div>
                        <div class="step-duration">‚è±Ô∏è 25-30 minuti</div>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="startPhase1()">
                üöÄ Inizia la Tua Sessione Finale di Trasformazione
            </button>
        </section>

        <!-- Phase 1: Assessment & Review -->
        <section class="phase1-section" id="phase1Section">
            <div class="phase-header">
                <div class="phase-icon">üìä</div>
                <div>
                    <h2 class="phase-title">Fase 1: Assessment Completo del Percorso</h2>
                    <p class="phase-subtitle">Misuriamo i risultati e celebriamo la tua trasformazione</p>
                </div>
            </div>
            
            <div class="assessment-progress">
                <div class="assessment-progress-text">Progresso assessment: <span id="assessmentProgress">0%</span></div>
                <div class="assessment-progress-bar">
                    <div class="assessment-progress-fill" id="assessmentProgressFill" style="width: 0%"></div>
                </div>
            </div>
            
            <form id="assessmentForm">
                <!-- Assessment Trasformazione Personale -->
                <div class="assessment-section" id="personalTransformation">
                    <h3>üåü Trasformazione Personale</h3>
                    <div class="assessment-intro" id="personalTransformationIntro">
                        Confrontiamo dove eri all'inizio del percorso con dove sei ora. 
                        Valuta ogni affermazione su una scala da 1 (per nulla) a 5 (completamente).
                    </div>
                    
                    <div class="question-group">
                        <div class="question-text">Ora ho chiarezza sui miei obiettivi di vita</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="clarity1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="clarity1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="clarity1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="clarity1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="clarity1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <div class="question-text">Mi sento pi√π sicuro delle mie capacit√† e del mio valore</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="confidence1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="confidence1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="confidence1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="confidence1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="confidence1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <div class="question-text">Ho sviluppato abitudini positive che mi supportano quotidianamente</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="habits1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="habits1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="habits1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="habits1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="habits1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <div class="question-text">Riesco a gestire meglio lo stress e le sfide quotidiane</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="stress1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="stress1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="stress1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="stress1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="stress1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <div class="question-text">Sono pi√π consapevole delle mie potenzialit√† e punti di forza</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="potential1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="potential1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="potential1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="potential1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="potential1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assessment Risultati Concreti -->
                <div class="assessment-section" id="concreteResults">
                    <h3>üéØ Risultati Concreti Ottenuti</h3>
                    <div class="assessment-intro" id="concreteResultsIntro">
                        Valutiamo i progressi tangibili e misurabili che hai raggiunto durante questo percorso.
                    </div>
                    
                    <div class="question-group">
                        <div class="question-text">Ho raggiunto obiettivi concreti che mi ero prefissato all'inizio</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="goals1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="goals1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="goals1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="goals1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="goals1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <div class="question-text">La mia vita quotidiana √® migliorata in modo significativo</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="life1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="life1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="life1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="life1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="life1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <div class="question-text">Le persone attorno a me hanno notato cambiamenti positivi</div>
                        <div class="likert-scale">
                            <div class="likert-option">
                                <input type="radio" name="others1" value="1" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Per nulla</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="others1" value="2" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Poco</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="others1" value="3" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Abbastanza</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="others1" value="4" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Molto</span>
                            </div>
                            <div class="likert-option">
                                <input type="radio" name="others1" value="5" onchange="updateAssessmentProgress(); autoSave()">
                                <span class="likert-label">Completamente</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trasformazioni Prima/Dopo -->
                <div class="transformation-tracker">
                    <h3 class="tracker-title">üîÑ La Tua Trasformazione Prima/Dopo</h3>
                    <div class="comparison-grid">
                        <div class="before-after">
                            <div class="ba-title">PRIMA del Percorso</div>
                            <div class="form-group">
                                <label for="beforeMindset">Come ti descrivevi mentalmente?</label>
                                <textarea id="beforeMindset" placeholder="Es: Confuso, demotivato, senza direzione..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="beforeHabits">Quali erano le tue abitudini principali?</label>
                                <textarea id="beforeHabits" placeholder="Es: Procrastinazione, cattiva alimentazione..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="beforeChallenges">Quali erano le tue sfide maggiori?</label>
                                <textarea id="beforeChallenges" placeholder="Es: Mancanza di energia, obiettivi vaghi..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                            </div>
                        </div>
                        <div class="before-after">
                            <div class="ba-title">DOPO il Percorso</div>
                            <div class="form-group">
                                <label for="afterMindset">Come ti descrivi ora mentalmente?</label>
                                <textarea id="afterMindset" placeholder="Es: Focalizzato, motivato, con chiarezza..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="afterHabits">Quali sono le tue nuove abitudini?</label>
                                <textarea id="afterHabits" placeholder="Es: Routine mattutina, esercizio regolare..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="afterStrengths">Quali sono i tuoi nuovi punti di forza?</label>
                                <textarea id="afterStrengths" placeholder="Es: Disciplina, pianificazione, autostima..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Domande di Riflessione Profonda -->
                <div class="assessment-section" id="deepReflection">
                    <h3>ü§î Riflessione Profonda</h3>
                    <div class="assessment-intro" id="deepReflectionIntro">
                        Queste domande ci aiuteranno a comprendere il significato profondo della tua trasformazione.
                    </div>
                    
                    <div class="form-group">
                        <label for="biggestChange">Qual √® il cambiamento pi√π grande che hai sperimentato in queste 7 settimane?</label>
                        <textarea id="biggestChange" placeholder="Rifletti sul cambiamento pi√π significativo che √® avvenuto in te..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="proudestMoment">Di quale momento o risultato di questo percorso sei pi√π orgoglioso?</label>
                        <textarea id="proudestMoment" placeholder="Racconta il momento in cui ti sei sentito pi√π orgoglioso di te stesso..." onchange="updateAssessmentProgress(); autoSave()"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="biggestLearning">Qual √® l'apprendimento pi√π importante che porterai con te per sempre?</label>
                        <textarea id="biggestLearning" placeholder="Cosa hai imparato che cambier√† per sempre il tuo approccio alla vita?" onchange="updateAssessmentProgress(); autoSave()"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="futureCommitment">A cosa ti impegni per mantenere e continuare questa crescita?</label>
                        <textarea id="futureCommitment" placeholder="Quali impegni prendi con te stesso per il futuro?" onchange="updateAssessmentProgress(); autoSave()"></textarea>
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" class="btn btn-success" id="completeAssessmentBtn" onclick="completePhase1()" disabled>
                        ‚úÖ Completa Assessment e Inizia Coaching Futuro
                    </button>
                </div>
            </form>
        </section>

        <!-- Phase 2: Future Coaching -->
        <section class="phase2-section" id="phase2Section">
            <div class="phase-header">
                <div class="phase-icon">üöÄ</div>
                <div>
                    <h2 class="phase-title">Fase 2: Coaching Futuro & Piano Mantenimento</h2>
                    <p class="phase-subtitle">Creiamo insieme il tuo futuro straordinario e sostenibile</p>
                </div>
            </div>
            
            <div class="coaching-context">
                <h3>üåü Il Tuo Profilo di Trasformazione Completato</h3>
                <p id="coachingContextText">
                    Straordinario! Hai completato un percorso di 7 settimane che ti ha portato 
                    a scoprire chi sei veramente, cosa vuoi davvero e come raggiungerlo. 
                    Ora √® il momento di guardare al futuro e creare un piano che mantenga 
                    e amplifichi questa crescita.
                </p>
                
                <div class="results-summary">
                    <div class="results-title">üí° Risultati del Tuo Assessment:</div>
                    <ul class="results-list" id="assessmentResults">
                        <li>Caricamento risultati personalizzati...</li>
                    </ul>
                </div>
            </div>
            
            <div class="time-warning" id="timeWarning">
                <strong>‚è∞ Abbiamo raggiunto i 40 minuti!</strong> Vuoi continuare per altri 10 minuti o preferisci terminare ora?
                <div style="margin-top: 1rem;">
                    <button class="btn btn-secondary" onclick="continueSession()">Continua</button>
                    <button class="btn btn-primary" onclick="endSession()">Completa Percorso</button>
                </div>
            </div>
            
            <div class="chat-status">
                <div class="status-dot"></div>
                <span id="chatStatusText">Andrea √® pronto per creare insieme il tuo futuro straordinario</span>
            </div>
            
            <div class="chat-container" id="chatContainer">
                <!-- Messages will be added here -->
            </div>
            
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Condividi con Andrea le tue visioni per il futuro...">
                <button class="btn btn-primary" onclick="sendChatMessage()">Invia</button>
            </div>
        </section>

        <!-- Completion Section -->
        <section class="completion-section" id="completionSection">
            <h2 class="completion-title celebrate">üéâ PERCORSO COMPLETATO! üéâ</h2>
            <p class="completion-message">
                <strong>Congratulazioni straordinarie!</strong> Hai completato con successo il percorso 
                LifestyleFitnessCoach di 7 settimane. Quello che hai raggiunto √® incredibile e 
                la trasformazione che hai vissuto √® solo l'inizio di un futuro straordinario!
            </p>
            
            <div class="celebration-section">
                <h3 class="celebration-title">üèÜ I Tuoi Risultati Straordinari</h3>
                <div class="celebration-stats" id="celebrationStats">
                    <div class="stat-item">
                        <div class="stat-number">7</div>
                        <div class="stat-label">Settimane Completate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="sessionsCount">0</div>
                        <div class="stat-label">Ore di Coaching</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="insightsCount">0</div>
                        <div class="stat-label">Insights Scoperti</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="habitsCount">0</div>
                        <div class="stat-label">Abitudini Trasformate</div>
                    </div>
                </div>
                <p style="margin-top: 1rem; font-style: italic; color: #ea580c;">
                    Questi numeri rappresentano solo una frazione della straordinaria trasformazione che hai vissuto!
                </p>
            </div>
            
            <div class="transformation-results">
                <h3 class="transformation-title">üìà La Tua Trasformazione Finale</h3>
                <div class="results-grid" id="finalResultsGrid">
                    <!-- Will be populated with final assessment results -->
                </div>
            </div>
            
            <div class="maintenance-plan">
                <h3 class="maintenance-title">üõ†Ô∏è Il Tuo Piano di Mantenimento a Lungo Termine</h3>
                <div class="plan-grid" id="maintenancePlanGrid">
                    <!-- Will be generated based on assessment and coaching -->
                </div>
            </div>
            
            <div class="completion-actions">
                <button class="btn btn-celebration" onclick="downloadCompletionCertificate()">üèÜ Scarica Certificato di Completamento</button>
                <button class="btn btn-success" onclick="downloadMaintenancePlan()">üìã Scarica Piano Mantenimento Completo</button>
                <a href="module-hub.html" class="btn btn-secondary">üè† Torna alla Dashboard</a>
                <button class="btn btn-primary" onclick="accessAdvancedPrograms()">üöÄ Accedi a Programmi Avanzati</button>
            </div>
        </section>
    </main>

    <script>
        // ü§ñ SISTEMA AI INTEGRATO v2.0 - Week 7 EMBEDDED
        // ================================================
        
        // === CONFIGURAZIONE PROFILI LIFESTYLE ===
        const LIFESTYLE_PROFILES_CONFIG = {
            'stressato_esaurito': {
                name: 'Stressato Esaurito',
                emoji: 'üò∞',
                communication_style: 'Comprensivo, rassicurante, orientato al recupero',
                language_tone: 'Paziente e supportivo, focus su benessere',
                priority_focus: ['recupero_energia', 'gestione_stress', 'boundaries'],
                coaching_approach: 'Recovery-first, step piccolissimi, zero pressione',
                future_coaching_style: 'Mantenimento sostenibile, piano anti-burnout',
                maintenance_focus: ['equilibrio', 'auto-cura', 'boundaries'],
                conversation_starters: [
                    'Come ti senti ora che hai completato questo percorso?',
                    'Quali sono i tuoi timori sul mantenere questi progressi?',
                    'Come possiamo creare un futuro che ti nutra invece di svuotarti?'
                ],
                avoid_words: ['veloce', 'intenso', 'massimo', 'spingiti'],
                preferred_words: ['gentilmente', 'gradualmente', 'sostenibile', 'equilibrio', 'cura']
            },
            
            'procrastinatore_bloccato': {
                name: 'Procrastinatore Bloccato',
                emoji: '‚è≥',
                communication_style: 'Motivazionale, orientato all\'azione, pratico',
                language_tone: 'Energico ma paziente, focus su micro-azioni',
                priority_focus: ['azione_immediata', 'sblocco_mentale', 'momentum'],
                coaching_approach: 'Action-first, micro-steps, celebration rapida',
                future_coaching_style: 'Sistema accountability, anti-ricadute',
                maintenance_focus: ['sistemi_automatici', 'accountability', 'micro-abitudini'],
                conversation_starters: [
                    'Che sistemi possiamo creare per evitare di tornare indietro?',
                    'Come trasformiamo questa nuova energia in qualcosa di automatico?',
                    'Quale sar√† la tua strategia quando la motivazione cala?'
                ],
                avoid_words: ['perfetto', 'completo', 'tutto insieme'],
                preferred_words: ['azione', 'sistema', 'automatico', 'step', 'momentum']
            },
            
            'perfezionista_insoddisfatto': {
                name: 'Perfezionista Insoddisfatto',
                emoji: 'üéØ',
                communication_style: 'Paziente, orientato al progresso, anti-perfezionismo',
                language_tone: 'Rassicurante ma diretto, focus su "abbastanza buono"',
                priority_focus: ['progress_over_perfection', 'self_compassion', 'completion'],
                coaching_approach: 'Progress-focused, celebrazione micro-vittorie',
                future_coaching_style: 'Crescita continua vs perfezione, auto-compassione',
                maintenance_focus: ['progresso_continuo', 'auto_compassione', 'celebrazione_piccoli_successi'],
                conversation_starters: [
                    'Come possiamo mantenere questo progresso senza la pressione della perfezione?',
                    'Cosa ti spaventa di pi√π del futuro che stai creando?',
                    'Come celebrerai i tuoi successi quotidiani da ora in poi?'
                ],
                avoid_words: ['perfetto', 'impeccabile', 'massimo', 'ideale'],
                preferred_words: ['progresso', 'miglioramento', 'crescita', 'celebrazione', 'abbastanza buono']
            },
            
            'dispersivo_confuso': {
                name: 'Dispersivo Confuso',
                emoji: 'ü§Ø',
                communication_style: 'Chiaro, strutturato, orientato al focus',
                language_tone: 'Diretto e organizzato, focus su priorit√†',
                priority_focus: ['chiarezza', 'prioritizzazione', 'focus'],
                coaching_approach: 'Clarity-first, structure tutto, one-thing-at-time',
                future_coaching_style: 'Focus mantenimento, strutture semplici',
                maintenance_focus: ['strutture_semplici', 'priorit√†_chiare', 'focus_quotidiano'],
                conversation_starters: [
                    'Ora che hai chiarezza, come manterrai questo focus nel futuro?',
                    'Quale sistema ti aiuter√† a non disperdere questa energia?',
                    'Come identificherai la TUA priorit√† numero 1 ogni giorno?'
                ],
                avoid_words: ['tutto', 'contemporaneamente', 'multiplo'],
                preferred_words: ['focus', 'priorit√†', 'una cosa', 'chiarezza', 'semplice', 'struttura']
            },
            
            'motivato_inconsistente': {
                name: 'Motivato Inconsistente',
                emoji: 'üé¢',
                communication_style: 'Energico, orientato ai sistemi, motivazionale',
                language_tone: 'Entusiasta ma pragmatico, focus su sistemi',
                priority_focus: ['sistemi', 'consistenza', 'tracking'],
                coaching_approach: 'System-building, habit-stacking, visual tracking',
                future_coaching_style: 'Sistemi anti-ricadute, accountability automatico',
                maintenance_focus: ['sistemi_automatici', 'tracking_visuale', 'accountability'],
                conversation_starters: [
                    'Che sistemi creerai per mantenere questa consistenza?',
                    'Come trasformiamo questi risultati in abitudini automatiche?',
                    'Quale sar√† il tuo piano quando l\'entusiasmo cala?'
                ],
                avoid_words: ['quando hai voglia', 'se ti va', 'dipende dalla motivazione'],
                preferred_words: ['sistema', 'automatico', 'consistente', 'tracking', 'abitudine']
            },
            
            'equilibrato_ottimizzatore': {
                name: 'Equilibrato Ottimizzatore',
                emoji: '‚ö°',
                communication_style: 'Sofisticato, orientato alla performance, consulenziale',
                language_tone: 'Professionale e tecnico, focus su ottimizzazione',
                priority_focus: ['ottimizzazione', 'performance', 'marginal_gains'],
                coaching_approach: 'Consultative, advanced techniques, data-driven',
                future_coaching_style: 'Evoluzione continua, next-level optimization',
                maintenance_focus: ['ottimizzazione_continua', 'marginal_gains', 'performance_tracking'],
                conversation_starters: [
                    'Come portiamo questa trasformazione al livello successivo?',
                    'Dove vedi le maggiori opportunit√† di ottimizzazione futura?',
                    'Che marginal gains implementerai per una crescita sostenibile?'
                ],
                avoid_words: ['base', 'semplice', 'normale'],
                preferred_words: ['ottimizza', 'performance', 'avanzato', 'next-level', 'marginal gains']
            }
        };

        // === SISTEMA AI INTEGRATO v2.0 PER WEEK 7 ===
        class Week7AISystem {
            constructor() {
                this.userProfile = null;
                this.isInitialized = false;
                this.conversationHistory = [];
                this.assessmentData = {};
                this.finalResults = {};
                this.maintenancePlan = {};
            }

            async initialize() {
                try {
                    // Carica profilo utente
                    await this.loadUserProfile();
                    
                    // Personalizza interfaccia
                    this.personalizeInterface();
                    
                    this.isInitialized = true;
                    console.log('ü§ñ Week 7 AI System inizializzato per profilo:', this.userProfile.profileType);
                    
                    return true;
                } catch (error) {
                    console.error('‚ùå Errore inizializzazione Week 7 AI:', error);
                    return false;
                }
            }

            async loadUserProfile() {
                try {
                    const quizData = localStorage.getItem('lifestyleQuizResults');
                    if (quizData) {
                        this.userProfile = JSON.parse(quizData);
                    } else {
                        this.userProfile = {
                            profileType: 'motivato_inconsistente',
                            name: 'Amico/a',
                            challenges: [],
                            scores: {}
                        };
                    }
                } catch (error) {
                    console.error('‚ùå Errore caricamento profilo:', error);
                    this.userProfile = { profileType: 'motivato_inconsistente', name: 'Amico/a' };
                }
            }

            personalizeInterface() {
                const config = LIFESTYLE_PROFILES_CONFIG[this.userProfile.profileType];
                if (!config) return;

                // Personalizza banner
                const banner = document.getElementById('personalizationBanner');
                const bannerText = document.getElementById('personalizationText');
                if (banner && bannerText) {
                    banner.classList.add('active');
                    bannerText.textContent = `üéØ Coaching finale personalizzato per: ${config.name} ${config.emoji}`;
                }

                // Personalizza welcome
                const welcomeTitle = document.getElementById('welcomeTitle');
                const welcomeSubtitle = document.getElementById('welcomeSubtitle');
                
                if (welcomeTitle && this.userProfile.name) {
                    welcomeTitle.textContent = `Benvenuto/a ${this.userProfile.name} nella Settimana Finale! üéâ`;
                }
                
                if (welcomeSubtitle) {
                    welcomeSubtitle.textContent = `Consolidamento e Futuro - Personalizzato per ${config.name}`;
                }

                // Personalizza assessment intro
                this.personalizeAssessmentIntros(config);

                // Personalizza chat placeholder
                const chatInput = document.getElementById('chatInput');
                if (chatInput) {
                    const placeholders = {
                        'stressato_esaurito': 'Condividi i tuoi pensieri senza fretta, sono qui per te...',
                        'procrastinatore_bloccato': 'Dimmi cosa hai in mente, anche se non √® perfetto...',
                        'perfezionista_insoddisfatto': 'Non serve la risposta perfetta, dimmi quello che senti...',
                        'dispersivo_confuso': 'Concentrati su UN pensiero e condividilo...',
                        'motivato_inconsistente': 'Condividi le tue idee per il futuro...',
                        'equilibrato_ottimizzatore': 'Condividi la tua visione strategica per il futuro...'
                    };
                    
                    chatInput.placeholder = placeholders[this.userProfile.profileType] || 
                                           'Condividi i tuoi pensieri con Andrea...';
                }

                // Personalizza chat status
                const chatStatus = document.getElementById('chatStatusText');
                if (chatStatus) {
                    chatStatus.textContent = `Andrea √® pronto per il coaching finale personalizzato (${config.name})`;
                }
            }

            personalizeAssessmentIntros(config) {
                // Personalizza intro assessment personale
                const personalIntro = document.getElementById('personalTransformationIntro');
                if (personalIntro) {
                    personalIntro.innerHTML = `Come ${config.name}, hai vissuto un percorso unico. ${config.communication_style} √® stato il mio approccio con te. Ora valutiamo insieme quanto sei cresciuto, considerando le tue caratteristiche specifiche.`;
                }

                // Personalizza intro risultati concreti
                const concreteIntro = document.getElementById('concreteResultsIntro');
                if (concreteIntro) {
                    concreteIntro.innerHTML = `Per il tuo profilo "${config.name}", i risultati concreti sono particolarmente importanti. Valutiamo i progressi tangibili che hai raggiunto nel tuo percorso personalizzato.`;
                }

                // Personalizza intro riflessione profonda
                const deepIntro = document.getElementById('deepReflectionIntro');
                if (deepIntro) {
                    deepIntro.innerHTML = `Come ${config.name}, la riflessione profonda ti aiuter√† a consolidare questa trasformazione. Queste domande sono calibrate per il tuo modo di processare il cambiamento.`;
                }
            }

            async generateFutureCoachingResponse(userMessage) {
                const config = LIFESTYLE_PROFILES_CONFIG[this.userProfile.profileType];
                const messageCount = this.conversationHistory.filter(m => m.sender === 'user').length;
                
                // Analizza il messaggio per personalizzazione
                const analysis = this.analyzeUserMessage(userMessage);
                
                // Genera risposta basata su fase conversazione e profilo
                let response;
                
                if (messageCount <= 1) {
                    response = this.generateVisionExplorationResponse(userMessage, config, analysis);
                } else if (messageCount <= 3) {
                    response = this.generatePlanningResponse(userMessage, config, analysis);
                } else {
                    response = this.generateMaintenanceResponse(userMessage, config, analysis);
                }
                
                // Aggiungi elementi specifici del profilo
                response = this.addProfileSpecificElements(response, config, analysis);
                
                return response;
            }

            analyzeUserMessage(message) {
                const analysis = {
                    sentiment: 'neutral',
                    topics: [],
                    concerns: [],
                    future_focus: false,
                    maintenance_focus: false
                };

                const lowerMessage = message.toLowerCase();

                // Analizza sentiment
                const positiveWords = ['entusiasta', 'motivato', 'pronto', 'eccitato', 'fiducioso'];
                const negativeWords = ['preoccupato', 'paura', 'difficile', 'impossibile', 'ansia'];
                
                if (positiveWords.some(word => lowerMessage.includes(word))) {
                    analysis.sentiment = 'positive';
                } else if (negativeWords.some(word => lowerMessage.includes(word))) {
                    analysis.sentiment = 'negative';
                }

                // Identifica topics
                const topicKeywords = {
                    'futuro': ['futuro', 'domani', 'prossimo', 'obiettivi', 'sogni'],
                    'mantenimento': ['mantenere', 'continuare', 'non perdere', 'costanza'],
                    'paure': ['paura', 'preoccupato', 'timore', 'ansia', 'nervoso'],
                    'motivazione': ['motivazione', 'energia', 'entusiasmo', 'voglia']
                };

                Object.entries(topicKeywords).forEach(([topic, keywords]) => {
                    if (keywords.some(keyword => lowerMessage.includes(keyword))) {
                        analysis.topics.push(topic);
                    }
                });

                // Flags speciali
                analysis.future_focus = analysis.topics.includes('futuro');
                analysis.maintenance_focus = analysis.topics.includes('mantenimento');

                return analysis;
            }

            generateVisionExplorationResponse(userMessage, config, analysis) {
                // Base responses per esplorazione visione futura
                const baseResponses = {
                    'stressato_esaurito': [
                        `${this.userProfile.name}, sento nella tua risposta una nuova serenit√† che non c'era prima. Quello che hai condiviso mi fa capire quanto sei cresciuto. Ora, immaginando un futuro in cui questa pace interiore sia la tua normalit√†, come sarebbe una tua giornata ideale? Parlami di un futuro che ti nutre invece di svuotarti.`,
                        
                        `√à bellissimo vedere come ora riesci a esprimerti con questa chiarezza. Prima del percorso, sentivo tanta tensione nelle tue parole. Ora c'√® una calma diversa. Dimmi, se dovessi progettare un futuro dove il benessere viene prima di tutto, cosa includeresti sicuramente?`
                    ],
                    
                    'procrastinatore_bloccato': [
                        `Wow! Sento che hai davvero sbloccato qualcosa di potente in te. La tua energia √® completamente diversa da 7 settimane fa. Ora che hai dimostrato a te stesso di saper agire, quale grande obiettivo vorresti conquistare NEI PROSSIMI 6 MESI? Parliamo di azione concreta!`,
                        
                        `Incredibile come ora riesci a parlare con questa determinazione! Prima mi descrivevi la frustrazione di non riuscire a iniziare, ora sento qualcuno che SA di poter realizzare i suoi sogni. Allora, se dovessi scegliere UNA cosa ambiziosa da completare entro fine anno, cosa sarebbe?`
                    ],
                    
                    'perfezionista_insoddisfatto': [
                        `${this.userProfile.name}, quello che mi colpisce di pi√π √® come ora riesci ad apprezzare il tuo progresso invece di focalizzarti solo su quello che manca. Questo cambiamento √® straordinario. Ora, immaginando un futuro dove celebri ogni vittoria lungo il cammino, come sarebbe diversa la tua vita?`,
                        
                        `Sento una nuova gentilezza verso te stesso nelle tue parole. Prima eri il tuo critico pi√π severo, ora vedo qualcuno che sa riconoscere il proprio valore. Se dovessi creare un futuro basato su questa nuova auto-compassione, cosa includeresti?`
                    ],
                    
                    'dispersivo_confuso': [
                        `Che differenza incredibile! Prima le tue parole andavano in mille direzioni, ora sento una chiarezza cristallina in quello che dici. Hai davvero trovato il tuo focus. Ora, se dovessi scegliere LA DIREZIONE principale per il tuo futuro, quale sarebbe? Parliamo di quella priorit√† che ti fa brillare gli occhi.`,
                        
                        `${this.userProfile.name}, √® bellissimo vedere come ora riesci a essere cos√¨ preciso e chiaro. Prima sentivo confusione, ora percepisci qualcuno che sa esattamente dove vuole andare. Dimmi, qual √® quella UNA cosa che dar√† significato ai tuoi prossimi anni?`
                    ],
                    
                    'motivato_inconsistente': [
                        `Fantastico! Sento che non solo hai ritrovato la motivazione, ma ora hai anche gli strumenti per mantenerla. Prima era un'altalena continua, ora percepisci stabilit√† nella tua energia. Come possiamo trasformare questa nuova consistenza in risultati straordinari? Dimmi la tua visione pi√π ambiziosa!`,
                        
                        `${this.userProfile.name}, quello che mi emoziona di pi√π √® sentire questa energia COSTANTE nelle tue parole. Prima era a ondate, ora √® come un fiume che scorre potente e continuo. Se dovessi canalizzare questa forza verso un obiettivo che ti cambierebbe la vita, quale sarebbe?`
                    ],
                    
                    'equilibrato_ottimizzatore': [
                        `Eccellente! Sento che hai raggiunto un nuovo livello di consapevolezza e strategia. Il tuo approccio ora √® ancora pi√π raffinato e potente. Considerando questa evoluzione, quale sar√† il tuo prossimo breakthrough? Parliamo di ottimizzazioni che ti porteranno a risultati straordinari.`,
                        
                        `${this.userProfile.name}, √® impressionante vedere come hai integrato tutti gli elementi del percorso in una strategia personale cos√¨ sofisticata. Ora, per portare questa trasformazione al next level, su quale area vedi il maggior potenziale di crescita esponenziale?`
                    ]
                };

                const responses = baseResponses[this.userProfile.profileType] || baseResponses['motivato_inconsistente'];
                let response = responses[Math.floor(Math.random() * responses.length)];

                // Personalizza in base ai risultati assessment
                if (this.finalResults.overallScore >= 4) {
                    response += ` Con un punteggio di trasformazione di ${this.finalResults.overallScore}/5, sei davvero pronto per obiettivi ambiziosi!`;
                }

                return response;
            }

            generatePlanningResponse(userMessage, config, analysis) {
                const baseResponses = {
                    'stressato_esaurito': [
                        `Perfetto! La tua visione ha una bellezza serena che mi emoziona. Ora, per realizzarla senza stress, dobbiamo creare un piano gentile ma efficace. Se dovessi identificare le 3 abitudini quotidiane che ti porterebbero gradualmente verso questo futuro, quali sarebbero? Ricorda: progresso senza pressione.`,
                        
                        `Bellissimo! Sento che hai davvero capito cosa significa creare una vita che ti sostiene. Ora, pensando ai prossimi 6 mesi, quale piccolo cambiamento mensile potresti fare per avvicinarti a questa visione? Parliamo di passi cos√¨ piccoli da essere irresistibili.`
                    ],
                    
                    'procrastinatore_bloccato': [
                        `ECCEZIONALE! La tua visione √® potente e concreta. Ora trasformiamola in azione immediata. Se dovessi fare una micro-azione OGGI STESSO verso questo futuro, quale sarebbe? E poi dimmi: come possiamo spezzare questo grande obiettivo in step da 15 minuti?`,
                        
                        `Incredibile energia! Ora canalizziamola in un piano d'attacco perfetto. Nei PROSSIMI 30 GIORNI, quali 3 azioni specifiche ti avvicinerebbero di pi√π a questa visione? Concentriamoci su cose che puoi iniziare SUBITO.`
                    ],
                    
                    'perfezionista_insoddisfatto': [
                        `La tua visione √® bellissima e, soprattutto, umana e realizzabile. Ora creiamo un piano che celebri ogni progresso lungo il cammino. Se dovessi definire 3 milestone "abbastanza buoni" nei prossimi mesi, quali sarebbero? Ricorda: fatto √® meglio che perfetto.`,
                        
                        `Straordinario! Ora costruiamo un piano che onori il tuo nuovo rapporto con te stesso. Come possiamo strutturare i prossimi mesi in modo che tu possa celebrare i progressi invece di focalizzarti su quello che manca? Parliamo di vittorie quotidiane.`
                    ],
                    
                    'dispersivo_confuso': [
                        `Perfetto! La tua visione √® chiara e focalizzata. Ora manteniamo questo focus costruendo un piano semplice ma potente. Se dovessi scegliere LA PRIORIT√Ä ASSOLUTA per i prossimi 90 giorni, quale sarebbe? Una sola cosa, ma fatta eccezionalmente bene.`,
                        
                        `Eccellente chiarezza! Ora trasformiamo questa visione in una strategia laser-focused. Come possiamo organizzare i prossimi mesi in modo che ogni giorno tu sappia esattamente qual √® la TUA priorit√† numero 1? Parliamo di struttura semplice ma efficace.`
                    ],
                    
                    'motivato_inconsistente': [
                        `FANTASTICO! Ora creiamo un sistema che trasformi questa energia in risultati automatici. Come possiamo strutturare i prossimi mesi in modo che il tuo progresso non dipenda dalla motivazione del momento? Parliamo di sistemi a prova di calo motivazionale.`,
                        
                        `Potente! Ora dobbiamo costruire l'infrastruttura del successo. Se dovessi creare 3 abitudini automatiche che ti portassero verso questa visione anche nei giorni "no", quali sarebbero? Concentriamoci su sistemi, non su forza di volont√†.`
                    ],
                    
                    'equilibrato_ottimizzatore': [
                        `Strategia eccellente! Ora ottimizziamo l'execution. Considerando i tuoi punti di forza e le risorse disponibili, qual √® il percorso pi√π efficiente verso questa visione? Parliamo di marginal gains e ottimizzazioni che amplificano i risultati.`,
                        
                        `Visione di alto livello! Ora costruiamo un piano di implementazione sofisticato. Come possiamo leveraggiare al massimo il tuo tempo e le tue competenze per accelerare verso questi risultati? Qual √® la tua strategia di ottimizzazione?`
                    ]
                };

                const responses = baseResponses[this.userProfile.profileType] || baseResponses['motivato_inconsistente'];
                return responses[Math.floor(Math.random() * responses.length)];
            }

            generateMaintenanceResponse(userMessage, config, analysis) {
                const baseResponses = {
                    'stressato_esaurito': [
                        `Perfetto! Stiamo costruendo qualcosa di sostenibile e nutriente. Ora, per assicurarci che questo benessere duri nel tempo, parliamo delle tue strategie anti-ricadute. Cosa farai quando sentirai di nuovo la pressione accumularsi? Come proteggerai questa pace che hai conquistato?`,
                        
                        `Bellissimo piano! Ora voglio assicurarmi che tu abbia tutti gli strumenti per mantenere questo equilibrio. Nei momenti pi√π difficili, qual √® la TUA strategia personale per tornare in connessione con te stesso? Come ti prenderai cura di te quando il mondo attorno chieder√† troppo?`
                    ],
                    
                    'procrastinatore_bloccato': [
                        `STRAORDINARIO! Ora creiamo il tuo sistema anti-procrastinazione definitivo. Se tra 6 mesi ti sentissi bloccato di nuovo, quale sar√† il tuo piano di emergenza? Come riattiverai questo momentum che hai creato? Parliamo del tuo kit di sblocco personale.`,
                        
                        `Incredibile progresso! Ora voglio assicurarmi che tu abbia un sistema a prova di ricadute. Qual √® il tuo piano per mantenere l'azione costante anche quando la motivazione scende? Come trasformerai queste nuove abitudini in automatismi?`
                    ],
                    
                    'perfezionista_insoddisfatto': [
                        `Magnifico! Ora consolidiamo questo nuovo rapporto gentile con te stesso. Come farai a ricordarti di celebrare i progressi quando la tua mente perfezionista si riattiva? Qual √® la tua strategia per mantenere viva questa auto-compassione?`,
                        
                        `Straordinario! Ora voglio assicurarmi che questo cambiamento sia permanente. Nei momenti in cui sentirai l'impulso del "non √® abbastanza buono", quale sar√† il tuo mantra personale? Come proteggerai questa nuova gentilezza verso te stesso?`
                    ],
                    
                    'dispersivo_confuso': [
                        `Eccellente! Ora creiamo il tuo sistema di focus permanente. Come manterrai questa chiarezza quando mille opportunit√† cercheranno di distrarti? Qual √® il tuo piano per rimanere fedele alla TUA priorit√† numero 1?`,
                        
                        `Perfetto! Ora voglio assicurarmi che questo focus sia sostenibile. Che sistema creerai per ricordarti ogni giorno qual √® la cosa pi√π importante? Come eviterai di tornare nella dispersione del passato?`
                    ],
                    
                    'motivato_inconsistente': [
                        `POTENTE! Ora creiamo il sistema che ti rende inarrestabile. Come farai a mantenere questa consistenza per i prossimi 12 mesi? Qual √® il tuo piano per i momenti in cui l'energia cala? Parliamo di automatismi che funzionano anche nei giorni "no".`,
                        
                        `Fantastico! Ora costruiamo la tua infrastruttura di successo a lungo termine. Che sistemi implementerai per rendere il progresso automatico? Come trasformerai questa nuova energia in abitudini che durano per sempre?`
                    ],
                    
                    'equilibrato_ottimizzatore': [
                        `Strategia eccellente! Ora ottimizziamo per la sostenibilit√† a lungo termine. Come evolver√† il tuo sistema nei prossimi 12 mesi? Quali metriche monitorerai per assicurarti di rimanere sulla traiettoria di crescita ottimale?`,
                        
                        `Implementazione di alto livello! Ora parliamo di evoluzione continua. Come manterrai questo standard di eccellenza mentre continui a crescere? Qual √® la tua strategia per il miglioramento incrementale costante?`
                    ]
                };

                const responses = baseResponses[this.userProfile.profileType] || baseResponses['motivato_inconsistente'];
                let response = responses[Math.floor(Math.random() * responses.length)];

                // Aggiungi elementi di chiusura per consolidamento
                response += `\n\nQuello che abbiamo costruito insieme in queste 7 settimane √® straordinario. Sei davvero pronto per questo futuro!`;

                return response;
            }

            addProfileSpecificElements(response, config, analysis) {
                // Aggiungi elementi specifici basati sul profilo
                if (analysis.sentiment === 'negative' && config.preferred_words) {
                    const encouragement = ` Ricorda: ${config.preferred_words.slice(0, 3).join(', ')} sono le tue parole chiave per il successo.`;
                    response += encouragement;
                }

                // Aggiungi riferimenti alle paure/preoccupazioni del profilo
                if (analysis.topics.includes('paure')) {
                    const fears = {
                        'stressato_esaurito': '√à normale avere il timore di tornare indietro. Ma ora hai gli strumenti per riconoscere i segnali prima.',
                        'procrastinatore_bloccato': 'La paura di rimanere bloccato √® comprensibile. Ma guarda quanto hai gi√† dimostrato di saper fare!',
                        'perfezionista_insoddisfatto': 'Il timore di non essere "abbastanza" √® familiare. Ma ora sai che il progresso conta pi√π della perfezione.',
                        'dispersivo_confuso': 'La preoccupazione di perdere il focus √® normale. Ma ora hai chiarezza su cosa conta davvero.',
                        'motivato_inconsistente': 'Temere il calo di motivazione √® comprensibile. Ma ora hai sistemi che funzionano indipendentemente dall\'umore.',
                        'equilibrato_ottimizzatore': 'La sfida della crescita continua √® stimolante per te. Hai gli strumenti per l\'ottimizzazione costante.'
                    };

                    if (fears[this.userProfile.profileType]) {
                        response += ` ${fears[this.userProfile.profileType]}`;
                    }
                }

                return response;
            }

            // Altre funzioni di supporto continuano...
        }

        // === VARIABILI GLOBALI WEEK 7 ===
        let sessionStartTime = Date.now();
        let sessionDuration = 50 * 60 * 1000; // 50 minutes
        let timerInterval;
        let currentPhase = 'welcome';
        let assessmentData = {};
        let chatHistory = [];
        let week7AI = null;
        let userProfile = null;
        let allWeeksData = {};
        let sessionExtended = false;
        let autoSaveInterval;
        let finalResults = {};
        let maintenancePlan = {};

        // === INIZIALIZZAZIONE ===
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üéâ Week-7 Sistema AI v2.0 Integrato - Script caricato!');
            
            // Inizializza sistema AI
            week7AI = new Week7AISystem();
            const aiInitialized = await week7AI.initialize();
            
            if (aiInitialized) {
                console.log('‚úÖ Sistema AI Week-7 inizializzato con successo!');
            } else {
                console.log('‚ö†Ô∏è Sistema AI in modalit√† fallback');
            }
            
            // Inizializza sessione
            startSessionTimer();
            loadUserProfile();
            loadAllWeeksData();
            loadSavedSession();
            startAutoSave();
        });

        // === FUNZIONI PRINCIPALI ===
        
        function startSessionTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Date.now() - sessionStartTime;
                const remaining = Math.max(0, sessionDuration - elapsed);
                
                const minutes = Math.floor(remaining / 60000);
                const seconds = Math.floor((remaining % 60000) / 1000);
                
                document.getElementById('sessionTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                const progress = (elapsed / sessionDuration) * 100;
                document.getElementById('sessionProgress').style.width = `${Math.min(progress, 100)}%`;
                
                // Check for 40 minute warning
                if (elapsed >= 40 * 60 * 1000 && !sessionExtended && currentPhase === 'phase2') {
                    show40MinuteWarning();
                }
                
                // Auto-end at 50 minutes
                if (remaining === 0) {
                    clearInterval(timerInterval);
                    endSession();
                }
            }, 1000);
        }

        function loadUserProfile() {
            try {
                const savedData = localStorage.getItem('lifestyleQuizResults');
                if (savedData) {
                    userProfile = JSON.parse(savedData);
                    console.log('‚úÖ User profile loaded:', userProfile);
                }
            } catch (error) {
                console.error('‚ùå Error loading user profile:', error);
            }
        }

        function loadAllWeeksData() {
            try {
                // Load data from all completed weeks
                for (let i = 1; i <= 6; i++) {
                    const weekData = localStorage.getItem(`week${i}SessionCompleted`);
                    if (weekData) {
                        allWeeksData[`week${i}`] = JSON.parse(weekData);
                    }
                }
                
                console.log('‚úÖ All weeks data loaded:', allWeeksData);
                updateWeeksGrid();
            } catch (error) {
                console.error('‚ùå Error loading weeks data:', error);
            }
        }

        function updateWeeksGrid() {
            const weeksGrid = document.getElementById('weeksGrid');
            const weekTitles = [
                'Incontro Conoscitivo',
                'Consapevolezza di S√©', 
                'Obiettivi SMART',
                'Piano di Azione',
                'Trasformazione Abitudini',
                'Scopri le Potenzialit√†'
            ];
            
            const weekInsights = [
                'Hai scoperto i tuoi obiettivi autentici',
                'Hai esplorato la tua identit√† profonda',
                'Hai creato obiettivi concreti e misurabili',
                'Hai costruito la roadmap del successo',
                'Hai implementato abitudini vincenti',
                'Hai identificato i tuoi super-poteri'
            ];
            
            // Update grid with actual completion status
            weeksGrid.innerHTML = '';
            for (let i = 0; i < 6; i++) {
                const weekNumber = i + 1;
                const isCompleted = allWeeksData[`week${weekNumber}`] ? true : false;
                
                const weekCard = document.createElement('div');
                weekCard.className = `week-card ${isCompleted ? 'completed' : 'pending'}`;
                weekCard.innerHTML = `
                    <div class="week-number">Settimana ${weekNumber} ${isCompleted ? '‚úÖ' : '‚è≥'}</div>
                    <div class="week-title">${weekTitles[i]}</div>
                    <div class="week-insight">${isCompleted ? weekInsights[i] : 'Da completare'}</div>
                `;
                weeksGrid.appendChild(weekCard);
            }
        }

        function loadSavedSession() {
            try {
                const savedSession = localStorage.getItem('week7SessionInProgress');
                if (savedSession) {
                    const sessionData = JSON.parse(savedSession);
                    
                    // Restore assessment data
                    if (sessionData.assessmentData) {
                        assessmentData = sessionData.assessmentData;
                        restoreAssessmentAnswers();
                    }
                    
                    // Restore chat history
                    if (sessionData.chatHistory) {
                        chatHistory = sessionData.chatHistory;
                    }
                    
                    // Restore current phase
                    if (sessionData.currentPhase) {
                        currentPhase = sessionData.currentPhase;
                        
                        if (currentPhase === 'phase1') {
                            startPhase1();
                        } else if (currentPhase === 'phase2') {
                            startPhase2();
                            restoreChatHistory();
                        }
                    }
                    
                    console.log('‚úÖ Session restored from:', sessionData);
                }
            } catch (error) {
                console.error('‚ùå Error loading saved session:', error);
            }
        }

        function restoreAssessmentAnswers() {
            Object.entries(assessmentData).forEach(([key, value]) => {
                const element = document.querySelector(`[name="${key}"], #${key}`);
                if (element) {
                    if (element.type === 'radio') {
                        const radio = document.querySelector(`[name="${key}"][value="${value}"]`);
                        if (radio) radio.checked = true;
                    } else {
                        element.value = value;
                    }
                }
            });
            updateAssessmentProgress();
        }

        function startAutoSave() {
            autoSaveInterval = setInterval(() => {
                autoSave();
            }, 5000);
        }

        function autoSave() {
            try {
                const sessionData = {
                    currentPhase: currentPhase,
                    assessmentData: assessmentData,
                    chatHistory: chatHistory,
                    finalResults: finalResults,
                    maintenancePlan: maintenancePlan,
                    sessionStartTime: sessionStartTime,
                    lastSaved: new Date().toISOString()
                };
                
                localStorage.setItem('week7SessionInProgress', JSON.stringify(sessionData));
            } catch (error) {
                console.error('‚ùå Error auto-saving:', error);
            }
        }

        function startPhase1() {
            currentPhase = 'phase1';
            
            // Hide welcome, show phase 1
            document.getElementById('welcomeSection').style.display = 'none';
            document.getElementById('phase1Section').classList.add('active');
            
            // Update phase indicator
            document.getElementById('phaseStep1').className = 'phase-step active';
            document.getElementById('phaseStep2').className = 'phase-step inactive';
            
            updateAssessmentProgress();
            autoSave();
        }

        function updateAssessmentProgress() {
            const form = document.getElementById('assessmentForm');
            const inputs = form.querySelectorAll('input[type="radio"], textarea');
            
            let filled = 0;
            const radioGroups = {};
            
            // Count filled inputs
            inputs.forEach(input => {
                if (input.type === 'radio') {
                    if (!radioGroups[input.name]) {
                        radioGroups[input.name] = false;
                    }
                    if (input.checked) {
                        radioGroups[input.name] = true;
                        assessmentData[input.name] = input.value;
                    }
                } else if (input.value.trim()) {
                    filled++;
                    assessmentData[input.id] = input.value.trim();
                }
            });
            
            // Count filled radio groups
            Object.values(radioGroups).forEach(isSelected => {
                if (isSelected) filled++;
            });
            
            const totalQuestions = Object.keys(radioGroups).length + form.querySelectorAll('textarea').length;
            const progress = (filled / totalQuestions) * 100;
            
            document.getElementById('assessmentProgress').textContent = `${Math.round(progress)}%`;
            document.getElementById('assessmentProgressFill').style.width = `${progress}%`;
            
            // Enable/disable complete button
            const completeBtn = document.getElementById('completeAssessmentBtn');
            if (progress === 100) {
                completeBtn.disabled = false;
                completeBtn.className = 'btn btn-success';
            } else {
                completeBtn.disabled = true;
                completeBtn.className = 'btn btn-disabled';
            }
        }

        function completePhase1() {
            // Calculate final results
            calculateFinalResults();
            
            // Mark phase 1 as completed
            document.getElementById('phaseStep1').className = 'phase-step completed';
            
            // Start phase 2
            startPhase2();
        }

        function calculateFinalResults() {
            // Calculate transformation scores
            let clarityTotal = 0, confidenceTotal = 0, habitsTotal = 0, stressTotal = 0, potentialTotal = 0;
            let goalsTotal = 0, lifeTotal = 0, othersTotal = 0;
            
            // Personal transformation scores
            if (assessmentData.clarity1) clarityTotal = parseInt(assessmentData.clarity1);
            if (assessmentData.confidence1) confidenceTotal = parseInt(assessmentData.confidence1);
            if (assessmentData.habits1) habitsTotal = parseInt(assessmentData.habits1);
            if (assessmentData.stress1) stressTotal = parseInt(assessmentData.stress1);
            if (assessmentData.potential1) potentialTotal = parseInt(assessmentData.potential1);
            
            // Concrete results scores
            if (assessmentData.goals1) goalsTotal = parseInt(assessmentData.goals1);
            if (assessmentData.life1) lifeTotal = parseInt(assessmentData.life1);
            if (assessmentData.others1) othersTotal = parseInt(assessmentData.others1);
            
            // Calculate overall transformation score
            const personalTransformation = Math.round((clarityTotal + confidenceTotal + habitsTotal + stressTotal + potentialTotal) / 5 * 10) / 10;
            const concreteResults = Math.round((goalsTotal + lifeTotal + othersTotal) / 3 * 10) / 10;
            const overallScore = Math.round((personalTransformation + concreteResults) / 2 * 10) / 10;
            
            finalResults = {
                personalTransformation,
                concreteResults,
                overallScore,
                clarity: clarityTotal,
                confidence: confidenceTotal,
                habits: habitsTotal,
                stress: stressTotal,
                potential: potentialTotal,
                goals: goalsTotal,
                life: lifeTotal,
                others: othersTotal
            };
            
            // Update AI system with results
            if (week7AI) {
                week7AI.finalResults = finalResults;
            }
            
            // Generate insights
            generateFinalInsights();
        }

        function generateFinalInsights() {
            const insights = [];
            
            if (finalResults.overallScore >= 4) {
                insights.push('Trasformazione straordinaria completata con successo');
            } else if (finalResults.overallScore >= 3) {
                insights.push('Eccellenti progressi ottenuti nel percorso');
            }
            
            if (finalResults.confidence >= 4) {
                insights.push('Autostima significativamente rafforzata');
            }
            
            if (finalResults.habits >= 4) {
                insights.push('Abitudini positive solidamente implementate');
            }
            
            if (finalResults.clarity >= 4) {
                insights.push('Chiarezza sui tuoi obiettivi raggiunta');
            }
            
            if (finalResults.potential >= 4) {
                insights.push('Potenzialit√† personali identificate e attivate');
            }
            
            // Count total weeks completed
            const completedWeeks = Object.keys(allWeeksData).length;
            insights.push(`Percorso di ${completedWeeks + 1} settimane completato`);
            
            finalResults.insights = insights;
        }

        function startPhase2() {
            currentPhase = 'phase2';
            
            // Hide phase 1, show phase 2
            document.getElementById('phase1Section').classList.remove('active');
            document.getElementById('phase2Section').classList.add('active');
            
            // Update phase indicator
            document.getElementById('phaseStep2').className = 'phase-step active';
            
            // Display assessment results
            displayAssessmentResults();
            
            // Personalizza coaching context
            personalizeCoachingContext();
            
            // Generate first coaching question
            generateFirstFutureCoachingQuestion();
            
            autoSave();
        }

        function displayAssessmentResults() {
            const resultsEl = document.getElementById('assessmentResults');
            if (finalResults.insights && finalResults.insights.length > 0) {
                resultsEl.innerHTML = finalResults.insights.map(insight => `<li>‚úÖ ${insight}</li>`).join('');
            } else {
                resultsEl.innerHTML = '<li>Risultati personalizzati in caricamento...</li>';
            }
        }

        function personalizeCoachingContext() {
            const config = LIFESTYLE_PROFILES_CONFIG[userProfile?.profileType];
            if (!config) return;

            const contextText = document.getElementById('coachingContextText');
            if (contextText) {
                contextText.innerHTML = `Straordinario! Come ${config.name}, hai completato un percorso di trasformazione incredibile. ${config.future_coaching_style} sar√† il mio approccio per creare insieme il tuo futuro. Sei pronto per portare questa crescita al livello successivo!`;
            }
        }

        function generateFirstFutureCoachingQuestion() {
            if (chatHistory.length === 0) {
                const firstQuestion = generatePersonalizedOpeningQuestion();
                addChatMessage(firstQuestion, 'coach');
            } else {
                restoreChatHistory();
            }
        }

        function generatePersonalizedOpeningQuestion() {
            const config = LIFESTYLE_PROFILES_CONFIG[userProfile?.profileType];
            
            let question = `${userProfile?.name || 'Amico/a'}, che momento incredibile! üéâ\n\n`;
            
            // Personalizza per profilo
            if (config) {
                question += `Come ${config.name}, hai appena completato una trasformazione che pochi riescono a portare fino in fondo. `;
            }
            
            // Reference specific results
            if (finalResults.overallScore >= 4) {
                question += `Con un punteggio di trasformazione di ${finalResults.overallScore}/5, hai dimostrato una crescita straordinaria! `;
            }
            
            // Reference transformation specifics
            if (assessmentData.biggestChange) {
                question += `Quello che mi ha colpito di pi√π √® quando hai scritto che il tuo cambiamento pi√π grande √® stato: "${assessmentData.biggestChange}". `;
            }
            
            // Profile-specific future question
            if (config && config.conversation_starters && config.conversation_starters.length > 0) {
                question += `\n\n${config.conversation_starters[0]}`;
            } else {
                question += `\n\nOra voglio farti una domanda che aprir√† la porta al tuo futuro straordinario: **Se tra 12 mesi ti guardassi indietro a questo momento, avendo vissuto il miglior anno della tua vita, cosa vorresti essere riuscito a creare, diventare e sperimentare?** üåü`;
            }
            
            return question;
        }

        function restoreChatHistory() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.innerHTML = '';
            
            chatHistory.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sender}`;
                messageDiv.innerHTML = `
                    <div class="message-content">${message.content}</div>
                    <div class="message-time">${message.time}</div>
                `;
                chatContainer.appendChild(messageDiv);
            });
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            input.value = '';
            
            // Get AI coaching response
            try {
                const coachingResponse = await getFutureCoachingResponse(message);
                setTimeout(() => {
                    addChatMessage(coachingResponse, 'coach');
                }, 1500);
            } catch (error) {
                console.error('‚ùå Error getting coaching response:', error);
                setTimeout(() => {
                    addChatMessage("Dammi un momento per rifl
                    eure sulla tua visione del futuro... Puoi ripetere?", 'coach');
                }, 1000);
            }
        }

        function addChatMessage(content, sender) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const now = new Date();
            const time = now.toLocaleTimeString('it-IT', { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div class="message-content">${content}</div>
                <div class="message-time">${time}</div>
            `;
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // Store in history
            chatHistory.push({ sender, content, time });
            
            // Extract insights for maintenance plan
            if (sender === 'user') {
                extractMaintenanceInsights(content);
            }
            
            // Update conversation history in AI system
            if (week7AI) {
                week7AI.conversationHistory = chatHistory;
            }
            
            autoSave();
        }

        async function getFutureCoachingResponse(userMessage) {
            // Try AI system first
            if (week7AI && week7AI.isInitialized) {
                try {
                    const response = await week7AI.generateFutureCoachingResponse(userMessage);
                    return response;
                } catch (error) {
                    console.error('‚ùå AI system error:', error);
                }
            }
            
            // Fallback to basic personalized response
            return generateBasicFutureResponse(userMessage);
        }

        function generateBasicFutureResponse(userMessage) {
            const config = LIFESTYLE_PROFILES_CONFIG[userProfile?.profileType];
            const messageCount = chatHistory.filter(m => m.sender === 'user').length;
            
            const fallbackResponses = {
                'stressato_esaurito': [
                    "Ti ascolto con molta attenzione. Quello che condividi ha un valore profondo. Come possiamo trasformare questa visione in qualcosa di sostenibile e nutriente per te?",
                    "Sento la bellezza di quello che stai creando. Ora, come possiamo assicurarci che questo futuro ti dia energia invece di togliertela?"
                ],
                'procrastinatore_bloccato': [
                    "Wow! L'energia che sento nelle tue parole √® incredibile. Ora trasformiamo questa visione in azione concreta. Qual √® il primo passo che puoi fare OGGI?",
                    "Perfetto! Ora canalizziamo questa potenza in un piano d'azione. Come spezziamo questo grande sogno in micro-azioni immediate?"
                ]
            };
            
            const responses = fallbackResponses[userProfile?.profileType] || [
                "Quello che condividi √® molto potente. Dimmi di pi√π su come vedi il tuo futuro...",
                "Interessante prospettiva! Come possiamo trasformare questa visione in realt√†?"
            ];
            
            return responses[messageCount % responses.length];
        }

        function extractMaintenanceInsights(userMessage) {
            // Extract insights for maintenance plan personalization
            const insights = [];
            
            if (userMessage.toLowerCase().includes('obiettiv') || userMessage.toLowerCase().includes('goal')) {
                insights.push('Focus su obiettivi chiari e misurabili');
            }
            
            if (userMessage.toLowerCase().includes('abitudin') || userMessage.toLowerCase().includes('routine')) {
                insights.push('Sviluppo di routine quotidiane supportive');
            }
            
            if (userMessage.toLowerCase().includes('equilibr') || userMessage.toLowerCase().includes('balance')) {
                insights.push('Mantenimento equilibrio vita-lavoro');
            }
            
            if (userMessage.toLowerCase().includes('salute') || userMessage.toLowerCase().includes('fitness')) {
                insights.push('Priorit√† su salute e benessere fisico');
            }
            
            if (userMessage.toLowerCase().includes('famiglia') || userMessage.toLowerCase().includes('relazioni')) {
                insights.push('Investimento nelle relazioni significative');
            }
            
            if (userMessage.toLowerCase().includes('crescita') || userMessage.toLowerCase().includes('learning')) {
                insights.push('Impegno nella crescita continua');
            }
            
            if (insights.length > 0) {
                maintenancePlan.insights = maintenancePlan.insights || [];
                maintenancePlan.insights.push(...insights);
            }
        }

        function show40MinuteWarning() {
            document.getElementById('timeWarning').classList.add('active');
        }

        function continueSession() {
            sessionExtended = true;
            document.getElementById('timeWarning').classList.remove('active');
            showMessage('‚úÖ Sessione estesa di 10 minuti. Continuiamo a creare il tuo futuro straordinario!', 'success');
        }

        function endSession() {
            clearInterval(timerInterval);
            clearInterval(autoSaveInterval);
            completeSession();
        }

        function completeSession() {
            // Save final session data
            const finalSessionData = {
                assessmentData: assessmentData,
                finalResults: finalResults,
                chatHistory: chatHistory,
                maintenancePlan: maintenancePlan,
                completedAt: new Date().toISOString(),
                sessionDuration: Date.now() - sessionStartTime,
                userProfile: userProfile,
                allWeeksData: allWeeksData
            };
            
            localStorage.setItem('week7SessionCompleted', JSON.stringify(finalSessionData));
            localStorage.setItem('lifestyleCoachingCompleted', JSON.stringify({
                completedAt: new Date().toISOString(),
                totalWeeks: 7,
                finalScore: finalResults.overallScore || 0
            }));
            localStorage.removeItem('week7SessionInProgress');
            
            // Update progress to completed
            updateUserProgress();
            
            // Show completion
            document.getElementById('phase2Section').classList.remove('active');
            document.getElementById('completionSection').classList.add('active');
            
            // Generate celebration and maintenance plan
            generateCelebrationStats();
            generateFinalResultsDisplay();
            generateMaintenancePlanDisplay();
            
            document.getElementById('completionSection').scrollIntoView({ behavior: 'smooth' });
        }

        function generateCelebrationStats() {
            const completedWeeks = Object.keys(allWeeksData).length + 1; // +1 for week 7
            const totalHours = completedWeeks * 0.75; // Assuming 45 min per session
            const totalInsights = finalResults.insights ? finalResults.insights.length : 0;
            const habitsTransformed = calculateHabitsTransformed();
            
            document.getElementById('sessionsCount').textContent = totalHours.toFixed(1);
            document.getElementById('insightsCount').textContent = totalInsights;
            document.getElementById('habitsCount').textContent = habitsTransformed;
        }

        function calculateHabitsTransformed() {
            let habitsCount = 0;
            
            // Count habits from various weeks
            if (allWeeksData.week5 && allWeeksData.week5.finalSessionData) {
                habitsCount += 3; // Typical habits from week 5
            }
            if (finalResults.habits >= 4) {
                habitsCount += 2; // Additional habits
            }
            
            return Math.max(habitsCount, 5); // Minimum 5 habits transformed
        }

        function generateFinalResultsDisplay() {
            const resultsGrid = document.getElementById('finalResultsGrid');
            
            const transformationFeedback = finalResults.overallScore >= 4 ? 'Straordinaria!' : 
                                         finalResults.overallScore >= 3 ? 'Eccellente!' : 'Significativa!';
            
            const confidenceFeedback = finalResults.confidence >= 4 ? 'Potente!' : 
                                     finalResults.confidence >= 3 ? 'Solida!' : 'In crescita!';
            
            const clarityFeedback = finalResults.clarity >= 4 ? 'Cristallina!' : 
                                  finalResults.clarity >= 3 ? 'Chiara!' : 'Migliorata!';
            
            const habitsFeedback = finalResults.habits >= 4 ? 'Radicate!' : 
                                 finalResults.habits >= 3 ? 'Stabili!' : 'Avviate!';
            
            resultsGrid.innerHTML = `
                <div class="result-item">
                    <div class="result-score">${finalResults.overallScore || 0}/5</div>
                    <div class="result-label">Trasformazione Complessiva</div>
                    <div class="result-feedback">${transformationFeedback}</div>
                </div>
                <div class="result-item">
                    <div class="result-score">${finalResults.confidence || 0}/5</div>
                    <div class="result-label">Autostima & Fiducia</div>
                    <div class="result-feedback">${confidenceFeedback}</div>
                </div>
                <div class="result-item">
                    <div class="result-score">${finalResults.clarity || 0}/5</div>
                    <div class="result-label">Chiarezza Obiettivi</div>
                    <div class="result-feedback">${clarityFeedback}</div>
                </div>
                <div class="result-item">
                    <div class="result-score">${finalResults.habits || 0}/5</div>
                    <div class="result-label">Abitudini Positive</div>
                    <div class="result-feedback">${habitsFeedback}</div>
                </div>
            `;
        }

        function generateMaintenancePlanDisplay() {
            const planGrid = document.getElementById('maintenancePlanGrid');
            
            const dailyHabits = generateDailyMaintenanceHabits();
            const weeklyReviews = generateWeeklyReviews();
            const monthlyGoals = generateMonthlyGoals();
            const emergencyStrategies = generateEmergencyStrategies();
            
            planGrid.innerHTML = `
                <div class="plan-section">
                    <div class="plan-section-title">üìÖ Routine Quotidiana</div>
                    <ul class="plan-list">
                        ${dailyHabits.map(habit => `<li>‚úÖ ${habit}</li>`).join('')}
                    </ul>
                </div>
                <div class="plan-section">
                    <div class="plan-section-title">üìä Review Settimanali</div>
                    <ul class="plan-list">
                        ${weeklyReviews.map(review => `<li>üìà ${review}</li>`).join('')}
                    </ul>
                </div>
                <div class="plan-section">
                    <div class="plan-section-title">üéØ Focus Mensile</div>
                    <ul class="plan-list">
                        ${monthlyGoals.map(goal => `<li>üöÄ ${goal}</li>`).join('')}
                    </ul>
                </div>
                <div class="plan-section">
                    <div class="plan-section-title">üÜò Strategie Anti-Ricadute</div>
                    <ul class="plan-list">
                        ${emergencyStrategies.map(strategy => `<li>üõ°Ô∏è ${strategy}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        function generateDailyMaintenanceHabits() {
            const config = LIFESTYLE_PROFILES_CONFIG[userProfile?.profileType];
            const baseHabits = [
                "10 minuti di riflessione mattutina sui tuoi obiettivi",
                "Pratica della routine che hai sviluppato nelle 7 settimane",
                "Celebra un piccolo successo della giornata"
            ];
            
            // Personalizza per profilo
            if (config && config.maintenance_focus) {
                const profileHabits = {
                    'stressato_esaurito': [
                        "Pratica 5 minuti di respirazione profonda",
                        "Identifica un momento di auto-cura non negoziabile",
                        "Stabilisci boundaries gentili ma fermi"
                    ],
                    'procrastinatore_bloccato': [
                        "Completa UNA micro-azione verso i tuoi obiettivi",
                        "Usa timer Pomodoro per mantenere focus",
                        "Celebra ogni completamento, anche piccolo"
                    ],
                    'perfezionista_insoddisfatto': [
                        "Pratica il 'abbastanza buono' in una cosa",
                        "Scrivi 3 progressi fatti, anche minimi",
                        "Pratica auto-compassione invece di auto-critica"
                    ],
                    'dispersivo_confuso': [
                        "Identifica LA priorit√† del giorno",
                        "Dedica 25 minuti focus su una sola attivit√†",
                        "Review serale: cosa ho completato oggi?"
                    ],
                    'motivato_inconsistente': [
                        "Esegui abitudini automatiche indipendentemente dall'umore",
                        "Traccia visualmente i progressi quotidiani",
                        "Sistema accountability: condividi progressi"
                    ],
                    'equilibrato_ottimizzatore': [
                        "Identifica un marginal gain da implementare",
                        "Monitora metriche chiave di performance",
                        "Ottimizza una routine esistente"
                    ]
                };
                
                return [...baseHabits, ...profileHabits[userProfile.profileType] || []];
            }
            
            return baseHabits;
        }

        function generateWeeklyReviews() {
            return [
                "Rivedi i progressi verso i tuoi obiettivi settimanali",
                "Valuta quali abitudini stanno funzionando meglio",
                "Identifica una cosa da migliorare per la settimana successiva",
                "Rileggi le tue riflessioni delle settimane passate",
                "Pianifica attivit√† che ti connettono con le tue potenzialit√†"
            ];
        }

        function generateMonthlyGoals() {
            const goals = [
                "Stabilisci un nuovo obiettivo SMART basato sui tuoi progressi",
                "Approfondisci una delle tue potenzialit√† identificate",
                "Connettiti con persone che supportano la tua crescita"
            ];
            
            // Personalizza per livello trasformazione
            if (finalResults.overallScore >= 4) {
                goals.push("Mentorizza qualcuno che sta iniziando un percorso simile");
                goals.push("Sfida te stesso con un obiettivo pi√π ambizioso");
            } else {
                goals.push("Consolida le abitudini sviluppate finora");
                goals.push("Richi